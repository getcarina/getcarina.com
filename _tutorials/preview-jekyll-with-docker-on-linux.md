---
title: Preview a Jekyll site with Docker on Linux
permalink: docs/tutorials/preview-jekyll-with-docker-on-linux/
topics:
  - docker
  - intermediate
---

**Note:** This tutorial is for Linux users. If you are using another operating system, follow
[the tutorial for Mac OS X]({{ site.baseurl }}/docs/tutorials/preview-jekyll-with-docker-on-mac/) or
[the tutorial for Windows]({{ site.baseurl }}/docs/tutorials/preview-jekyll-with-docker-on-windows/) instead.

[Jekyll][jekyll] is a popular static site generator, most commonly used for blogging on GitHub Pages.
It is written in Ruby and sometimes getting your machine setup properly to preview your
changes before publishing can be difficult.

This tutorial describes how to preview a Jekyll site in a Docker container, so that
you do not need to install Ruby or Jekyll on your local machine.

[jekyll]: https://jekyllrb.com/

## <a name="prerequisites"></a> Prerequisites
* [Docker](http://docs.docker.com/linux/step_one/)
* An existing Jekyll site on your local file system. If you do not have
  an existing site, a good way to get started quickly is to download a [Jekyll theme][jekyll-themes].

[jekyll-themes]: https://github.com/jekyll/jekyll/wiki/Themes

## <a name="steps"></a> Steps

1. Open a command terminal and change to your Jekyll site directory.

2. Create a new file named **Dockerfile** and populate it with the following content.

    **Note**: If you are using GitHub Pages or are not using any Jekyll plug-ins,
    you do not need to create a custom Docker image. Skip to the next step.

    ```
    FROM grahamc/jekyll:latest

    # Install whatever is in your Gemfile
    WORKDIR /tmp
    ADD Gemfile /tmp/
    ADD Gemfile.lock /tmp/
    RUN bundle install

    # Change back to the Jekyll site directory
    WORKDIR /src
    ```

3. Create a script named **preview**. You might want to customize the
    `DOCKER_IMAGE_NAME` variable defined at the top of the file.

    ```bash
    #!/usr/bin/env bash

    # Set to the name of the Docker image you want to use
    DOCKER_IMAGE_NAME=my-site

    # Stop on first error
    set -e

    if [ -e Dockerfile ]; then
      # Build a custom Docker image that has custom Jekyll plug-ins installed
      docker build --tag $DOCKER_IMAGE_NAME --file Dockerfile .

      # Remove dangling images from previous runs
      docker rmi -f $(docker images --filter "dangling=true" -q) > /dev/null 2>&1 || true
    else
      # Use an existing Jekyll Docker image
      DOCKER_IMAGE_NAME=grahamc/jekyll
    fi

    echo "***********************************************************"
    echo "  Your site will be available at http://localhost:4000"
    echo "***********************************************************"

    # Start Jekyll and watch for changes
    docker run --rm \
      --volume=$(pwd):/src \
      --publish 4000:4000 \
      $DOCKER_IMAGE_NAME \
      serve --watch --drafts -H 0.0.0.0
    ```

4. Mark the preview script as executable.

    ```bash
    chmod +x preview
    ```
5. Execute the preview script to start Jekyll.

    ```bash
    ./preview
    ```

6. In a web browser, navigate to the URL specified in the output.
    Following is an example of the output:

    ```bash
    ***********************************************************
      Your site will be available at http://localhost:4000
    ***********************************************************
    Configuration file: /src/_config.yml
                Source: /src
           Destination: /src/_site
          Generating...
                        done.
     Auto-regeneration: enabled for / src
    Configuration file: /src/_config.yml
        Server address: http://0.0.0.0:4000/
      Server running... press ctrl-c to stop.
    ```
<br/>

You can now modify your site and preview the changes.
After you save a file, it will be automatically regenerated by Jekyll.
Refresh the page in your web browser to see your changes.

[jekyll-image]: https://hub.docker.com/r/grahamc/jekyll/

## <a name="resources"></a>Resources

* [Jekyll documentation](https://jekyllrb.com/docs/home/)
* [Using Jekyll with GitHub Pages](https://jekyllrb.com/docs/github-pages/)
